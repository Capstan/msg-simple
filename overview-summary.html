<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Sat Jun 29 14:11:48 CEST 2013 -->
<title>Overview (msg-simple 0.9 API)</title>
<meta name="date" content="2013-06-29">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Overview (msg-simple 0.9 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 class="title">msg-simple 0.9 API</h1>
</div>
<div class="header">
<div class="subTitle">
<div class="block">What is it</div>
</div>
<p>See: <a href="#overview_description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="com/github/fge/msgsimple/package-summary.html">com.github.fge.msgsimple</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/github/fge/msgsimple/bundle/package-summary.html">com.github.fge.msgsimple.bundle</a></td>
<td class="colLast">
<div class="block">Main class; property-based bundle provider</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="com/github/fge/msgsimple/load/package-summary.html">com.github.fge.msgsimple.load</a></td>
<td class="colLast">
<div class="block">Automatic message bundle loading support</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/github/fge/msgsimple/locale/package-summary.html">com.github.fge.msgsimple.locale</a></td>
<td class="colLast">
<div class="block">Locale utilities</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="com/github/fge/msgsimple/provider/package-summary.html">com.github.fge.msgsimple.provider</a></td>
<td class="colLast">
<div class="block">Message source provider interface and implementations</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/github/fge/msgsimple/serviceloader/package-summary.html">com.github.fge.msgsimple.serviceloader</a></td>
<td class="colLast">
<div class="block"><a href="http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html?is-external=true" title="class or interface in java.util"><code>ServiceLoader</code></a> support - DEPRECATED</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="com/github/fge/msgsimple/source/package-summary.html">com.github.fge.msgsimple.source</a></td>
<td class="colLast">
<div class="block">Message sources</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="footer"><a name="overview_description">
<!--   -->
</a>
<div class="subTitle">
<div class="block"><h2>What is it</h2>

<p>This package is an alternative to the JDK's <a href="http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html?is-external=true" title="class or interface in java.util"><code>ResourceBundle</code></a>
with the following characteristics:</p>

<ul>
    <li>extensible API;</li>
    <li>can read property files using any character set;</li>
    <li>full backwards-compatibility with <a href="http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html?is-external=true" title="class or interface in java.util"><code>ResourceBundle</code></a>;</li>
    <li>i18n/locale support;</li>
    <li>stackable message sources; can prepend as well as append;</li>
    <li>static message sources or on-demand loading message sources, with
    configurable timeout and expiry;</li>
    <li><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html?is-external=true" title="class or interface in java.util"><code>Formatter</code></a> support, in addition to <a href="http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html?is-external=true" title="class or interface in java.text"><code>MessageFormat</code></a> support;</li>
    <li>error-proof: missing messages or bad format arguments won't throw
    exceptions (only null arguments will, with appropriate error messages);</li>
    <li>builtin assertions into message bundles (null checks, condition checks);
    </li>
    <li>on-demand loading and caching of message bundles.</li>
</ul>

<h2>Quick start</h2>

<p>If you wish to reuse an existing <a href="http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html?is-external=true" title="class or interface in java.util"><code>ResourceBundle</code></a>, the class
you will use is <a href="com/github/fge/msgsimple/bundle/PropertiesBundle.html" title="class in com.github.fge.msgsimple.bundle"><code>PropertiesBundle</code></a>. It
contains static factory methods to provide a ready-to-use <a href="com/github/fge/msgsimple/bundle/MessageBundle.html" title="class in com.github.fge.msgsimple.bundle"><code>MessageBundle</code></a>:</p>

<pre>
    // Load a properties bundle using UTF-8 and no expiry
    final MessageBundle bundle = PropertiesBundle.forPath("path/to/messages");
    // Load a properties bundle using UTF-8 and an expiry of 15 minutes
    final MessageBundle bundle = PropertiesBundle.forPath("path/to/messages",
        15L, TimeUnit.MINUTES);
    // Load a legacy resource bundle (ISO-8859-1 charset, no expiry)
    final MessageBundle bundle
        = PropertiesBundle.legacyResourceBundle("path/to/messages");
</pre>

<p>You are now ready to print out messages:</p>

<pre>
    // Message using the default locale
    bundle.getMessage("message.key");
    // Message using an alternative locale
    bundle.getMessage(Locale.CANADA, "message.key");
    bundle.getMessage(LocaleUtils.parseLocale("it_IT_sicily", "message.key");
    // message using a Formatter
    bundle.printf("message.key", arg1, arg2);
    // message using MessageFormat
    bundle.format("message.key", arg1, arg2);
    // etc etc
</pre>

<p>You can also use preconditions:</p>

<pre>
    // Checks the reference for null; throws NullPointerException if it is;
    final MyClass obj = bundle.checkForNull(ref, "err.nullMyClass");
    // Checks whether the condition is true; throws IllegalArgumentException
    // otherwise
    bundle.checkArgumentPrintf(something.isOk(), "err.something.notOk", arg1,
        arg2);
</pre>

<h2>Extending the API</h2>

<p>The API is very simple to extend. There are two interfaces:</p>

<ul>
    <li><a href="com/github/fge/msgsimple/source/MessageSource.html" title="interface in com.github.fge.msgsimple.source"><code>MessageSource</code></a> represents a
    message source;</li>
    <li><a href="com/github/fge/msgsimple/provider/MessageSourceProvider.html" title="interface in com.github.fge.msgsimple.provider"><code>MessageSourceProvider</code></a>
    represents a related set of message sources;</li>
    <li><a href="com/github/fge/msgsimple/provider/MessageSourceLoader.html" title="interface in com.github.fge.msgsimple.provider"><code>MessageSourceLoader</code></a> represents
    an on-demand loader for dynamic message sources.</li>
</ul>

<p>This library provides two message source implementations: <a href="com/github/fge/msgsimple/source/MapMessageSource.html" title="class in com.github.fge.msgsimple.source"><code>MapMessageSource</code></a> is a "quickpatch" source
backed by a <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util"><code>Map</code></a>, and <a href="com/github/fge/msgsimple/source/PropertiesMessageSource.html" title="class in com.github.fge.msgsimple.source"><code>PropertiesMessageSource</code></a>, which reads a property
file using the encoding of your choice.</p>

<p>It also provides two implementations of message source providers: <a href="com/github/fge/msgsimple/provider/StaticMessageSourceProvider.html" title="class in com.github.fge.msgsimple.provider"><code>StaticMessageSourceProvider</code></a> (static,
unchanging message sources) and <a href="com/github/fge/msgsimple/provider/LoadingMessageSourceProvider.html" title="class in com.github.fge.msgsimple.provider"><code>LoadingMessageSourceProvider</code></a> (on-demand
loading). Using the latter, you can specify an expiry time and a loading
timeout.</p>

<h2>Automatic loading</h2>

<p>If you have several message bundles and don't want to create a singleton just
to distribute them across several classes, you can instead provide an
implementation of <a href="com/github/fge/msgsimple/load/MessageBundleLoader.html" title="interface in com.github.fge.msgsimple.load"><code>MessageBundleLoader</code></a>.
When you need to access this bundle, from anywhere in your code, you can then
use the <a href="com/github/fge/msgsimple/load/MessageBundles.html" title="class in com.github.fge.msgsimple.load"><code>MessageBundles</code></a> class, which will
take care of instantiating the loader and provide you with the bundle:</p>

<pre>
    private static final MessageBundle BUNDLE
        = MessageBundles.getBundle(MyBundleLoader.class);
</pre>

<h2>Migrating from <a href="http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html?is-external=true" title="class or interface in java.util"><code>ServiceLoader</code></a></h2>

<p>ServiceLoader support is now deprecated and discouraged. Fortunately,
migrating from ServiceLoader is an easy three-step process:</p>

<h3>Make your <a href="com/github/fge/msgsimple/serviceloader/MessageBundleProvider.html" title="interface in com.github.fge.msgsimple.serviceloader"><code>MessageBundleProvider</code></a> implementations
also implement <a href="com/github/fge/msgsimple/load/MessageBundleLoader.html" title="interface in com.github.fge.msgsimple.load"><code>MessageBundleLoader</code></a></h3>

<p>That is, turn:</p>

<pre>
    public final class MyBundle
        implements MessageBundleProvider
</pre>

<p>into:</p>

<pre>
    public final class MyBundle
        implements MessageBundleLoader, MessageBundleProvider
</pre>

<p>Those two interfaces are ultimately the same.</p>

<h3>Turn all your calls to <a href="com/github/fge/msgsimple/serviceloader/MessageBundleFactory.html" title="class in com.github.fge.msgsimple.serviceloader"><code>MessageBundleFactory</code></a> into calls to
<a href="com/github/fge/msgsimple/load/MessageBundles.html" title="class in com.github.fge.msgsimple.load"><code>MessageBundles</code></a>
</h3>

<p>That is, turn:</p>

<pre>
    private static final MessageBundle BUNDLE
        = MessageBundleFactory.getBundle(MyBundle.class);
</pre>

<p>into:</p>

<pre>
    private static final MessageBundle BUNDLE
        = MessageBundles.getBundle(MyBundle.class);
</pre>

<h3>Unimplement <a href="com/github/fge/msgsimple/serviceloader/MessageBundleProvider.html" title="interface in com.github.fge.msgsimple.serviceloader"><code>MessageBundleProvider</code></a> on all your
message bundle loaders</h3>

<p>That is, turn:</p>

<pre>
    public final class MyBundle
        implements MessageBundleLoader, MessageBundleProvider
</pre>

<p>into:</p>
<pre>
    public final class MyBundle
        implements MessageBundleLoader
</pre>

<p>And you're done!</p>

<h2>Using <a href="http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html?is-external=true" title="class or interface in java.util"><code>ServiceLoader</code></a> (OBSOLETE!)</h2>

<p>In order to use the service loader capability of the JDK, you need two
elements:</p>

<ul>
    <li>one or more implementation(s) of <a href="com/github/fge/msgsimple/serviceloader/MessageBundleProvider.html" title="interface in com.github.fge.msgsimple.serviceloader"><code>MessageBundleProvider</code></a>;</li>
    <li>a file in your classpath, named <code>META-INF/services/com.github.fge.msgsimple.serviceloader.MessageBundleProvider</code>
    listing your implementations (one per line).</li>
</ul>

<p>Once this is done, you can get a bundle using:</p>

<pre>
    final MessageBundle bundle = MessageBundleFactory.getBundle(MyBundle.class);
</pre>

<h2>More information</h2>

<p>See <a href="https://github.com/fge/msg-simple/wiki/Examples">here</a>
for more complete usage examples.</p></div>
</div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
